var pokemonRepository=function(){var e=[],o=$("ul"),t=$("#modal-container"),n="https://pokeapi.co/api/v2/pokemon/?limit=150";function i(o){e.push(o)}function a(e){pokemonRepository.loadDetails(e).then(function(){s(e)})}function s(e){console.log("TCL: showModal -> pokemon",e.imageUrl),t.empty();var o=$('<div class="pokemon-modal"></div>'),n=$('<button class="modalClose"> Close </button>').on("click",p);e.name=e.name.charAt(0).toUpperCase()+e.name.substring(1);var i=$("<h1>"+e.name+"</h1>"),a=$("<img src="+e.imageUrl+">"),s=$("<div>Height: "+e.height+"</div>"),l=$("<div>Height: "+e.weight+"</div>"),r=$("<div>Type: "+e.types+"</div>");o.append(n),o.append(i),o.append(a),o.append(s),o.append(l),o.append(r),t.append(o).addClass("is-visible")}function p(){t.removeClass("is-visible")}return t.on("click",function(e){e.target===t&&p()}),{add:i,getAll:function(){return e},addListItem:function(e){var t=$("<li></li>"),n=$('<button class="pokemon-list__button">'+e.name+"</button>");t.append(n),o.append(t),n.on("click",function(){a(e)})},showDetails:a,loadList:function(){return $.ajax(n,{dataType:"json"}).then(function(e){e.results.forEach(function(e){i({name:e.name,detailsUrl:e.url})})}).catch(function(e){console.error(e)})},loadDetails:function(e){var o=e.detailsUrl;return $.ajax(o,{dataType:"json"}).then(function(o){e.imageUrl=o.sprites.front_default,e.height=o.height,e.weight=o.weight,2==o.types.length?e.types=[o.types[0].type.name,o.types[1].type.name]:e.types=[o.types[0].type.name]}).catch(function(e){console.error(e)})},showModal:s,hideModal:p}}(),$pokemonList=$("ul");pokemonRepository.getAll().forEach(function(e){pokemonRepository.addListItem(e)}),pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(e){pokemonRepository.addListItem(e)})});
